(function(a){Object.keys=Object.keys||function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}();var b=b||{};b.MultiselectController={init:function(c){var d=a(this),e=a('<div class="multiselect-trigger-container" />'),f=a('<div class="multiselect-dropdown-container" />'),g=a('<div class="multiselect-action-container" />'),h=a("<ul />"),i=a('<input type="text" />'),j=a('<a href="javascript:void(0)" class="multiselect-checkall-link">Check All</a>'),k=a('<a href="javascript:void(0)" class="multiselect-uncheckall-link">Uncheck All</a>');g.append(i,j,k),f.append(g,h),d.append(e,f);if(c&&c.items){if(typeof c.items!="object")throw"Nextt Multiselect - Invalid initialization params - items should be a map";h.data("options",c);var l="",m=Object.keys(c.items),n=c.limit?c.limit:m.length;h.data("nextItem",n),h.data("keyList",m);for(var o=0;o<n;o++){var p="";a.inArray(m[o],c.checked)>=0&&(p=' checked="checked"');var q='<li><label><input type="checkbox" value="'+m[o]+'" '+p+"/>"+c.items[m[o]]+"</label></li>";l+=q}h.append(l)}else h.append('<li class="multiselect-empty-msg">No items to show</li>');var r=a('<span class="nr-items" />');c&&c.checked?r.html(c.checked.length):r.html("0");var s=a('<span class="items-selected" />').append(r).append(" selected");e.append(s),h.bind("scroll",b.MultiselectController._scroll)},_scroll:function(){var b=a(this);if(b[0].scrollHeight-b.scrollTop()>500)return;var c=b.data("nextItem"),d=b.data("options"),e=b.data("keyList");if(d&&d.limit&&e.length!==c){console.log("irra!");var f=c+d.limit,g="";for(var h=c;h<f;h++){var i="";a.inArray(e[h],d.checked)>=0&&(i=' checked="checked"');var j='<li><label><input type="checkbox" value="'+e[h]+'" '+i+"/>"+d.items[e[h]]+"</label></li>";g+=j}b.append(g),b.data("nextItem",f)}},addItems:function(a){}},a.extend(a.fn,{nexttMultiselect:function(c){if(b.MultiselectController[c])return b.MultiselectController[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c){var d=a.extend(b.MultiselectController.defaultOptions,c);return this.each(function(){b.MultiselectController.init.apply(this,[d])})}a.error("Method "+c+" does not exist on jquery.nextt.multiselect")}})})(jQuery)